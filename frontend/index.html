<!doctype html>
<html lang="pt-br">

  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="DespFinancee" />
    <meta name="msapplication-TileColor" content="#6366F1" />
    <meta name="msapplication-tap-highlight" content="no" />

    <!-- CSP ser√° configurada dinamicamente pelo script abaixo -->

    <title>DespFinancee ‚Äî Controle financeiro com IA e gamifica√ß√£o</title>

    <meta name="description"
      content="DespFinancee: gest√£o financeira inteligente e divertida. IA, gamifica√ß√£o, score financeiro, exporta√ß√£o total e seguran√ßa ‚Äî 100% gratuito e open source." />
    <meta name="theme-color" content="#6366F1" />

    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="DespFinancee" />
    <meta property="og:title" content="DespFinancee ‚Äî Controle financeiro com IA e gamifica√ß√£o" />
    <meta property="og:description"
      content="IA que trabalha por voc√™, gamifica√ß√£o que engaja e seguran√ßa de verdade. 100% gratuito e open source." />
    <meta property="og:url" content="/" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="DespFinancee ‚Äî Controle financeiro com IA e gamifica√ß√£o" />
    <meta name="twitter:description" content="IA, gamifica√ß√£o, score e exporta√ß√£o total. Open source e gratuito." />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet">

    <!-- CSP din√¢mico para desenvolvimento -->
    <script>
      (function () {
        // Detectar se estamos em desenvolvimento
        const hostname = window.location.hostname;
        const isDev = hostname === 'localhost' ||
          hostname === '127.0.0.1' ||
          /^192\.168\./.test(hostname) ||
          /^10\./.test(hostname) ||
          /^172\.(1[6-9]|2[0-9]|3[0-1])\./.test(hostname);

        console.log('üîç Hostname:', hostname, 'isDev:', isDev);

        if (isDev) {
          // Para desenvolvimento: CSP muito permissiva
          const devCSP = "default-src * 'unsafe-inline' 'unsafe-eval' data: blob:; connect-src * ws: wss:; script-src * 'unsafe-inline' 'unsafe-eval'; style-src * 'unsafe-inline';";

          const cspMeta = document.createElement('meta');
          cspMeta.setAttribute('http-equiv', 'Content-Security-Policy');
          cspMeta.setAttribute('content', devCSP);
          document.head.appendChild(cspMeta);

          console.log('üîì CSP de desenvolvimento aplicada - todas as conex√µes permitidas');
        } else {
          // Para produ√ß√£o: CSP restritiva
          const prodCSP = "default-src 'self'; script-src 'self' https://js.stripe.com https://www.mercadopago.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob:; connect-src 'self' https://api.stripe.com https://api.mercadopago.com; frame-src https://js.stripe.com https://www.mercadopago.com;";

          const cspMeta = document.createElement('meta');
          cspMeta.setAttribute('http-equiv', 'Content-Security-Policy');
          cspMeta.setAttribute('content', prodCSP);
          document.head.appendChild(cspMeta);

          console.log('üîí CSP de produ√ß√£o aplicada');
        }
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="./src/main.jsx"></script>
  </body>

</html>